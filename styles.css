:root{
  --bg:#0b1020;
  --card:#121a33cc;
  --glass:#1a2447aa;
  --text:#eaf0ff;
  --muted:#9fb2ff;
  --pri:#5b8cff;
  --pri-2:#7ea2ff;
  --link:#8fb7ff;
  --link-hover:#cfe0ff;
  --ok:#2ecc71;
  --bad:#ff6b6b;
  --border:rgba(255,255,255,0.08);
  --radius:18px;
  --radius-sm:12px;
  --shadow:0 6px 24px rgba(0,0,0,.25), inset 0 1px 0 rgba(255,255,255,.03);
  --accent-coral-start:#ff6b6b;
  --accent-coral-end:#ff8d72;
  --grad-primary:linear-gradient(135deg,var(--pri),var(--pri-2));
  --grad-primary-x:linear-gradient(90deg,var(--pri),var(--pri-2));
  --grad-coral:linear-gradient(135deg,var(--accent-coral-start),var(--accent-coral-end));
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  position:relative;
  margin:0; padding:0; font:16px/1.5 Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;
  background:
    radial-gradient(1200px 600px at 20% -10%, #283d85 0%, transparent 50%),
    radial-gradient(1200px 600px at 80% -10%, #1c8fd1 0%, transparent 50%),
    var(--bg);
  background-attachment: fixed, fixed, fixed; /* фон фиксирован при скролле */
  background-size: 1800px 900px, 1800px 900px, auto;
  background-repeat:no-repeat;
  color:var(--text);

  /* layout: make page a column so footer appears after content and doesn't overlay inputs */
  display:flex; flex-direction:column; min-height:100vh;
}
body::before{
  content:""; position:fixed; left:-15%; top:-20%; width:70vw; height:60vh; z-index:0; pointer-events:none;
  background: radial-gradient(closest-side, rgba(91,140,255,.32), transparent 70%);
  filter: blur(70px);
  animation: float1 32s ease-in-out infinite alternate;
}
body::after{
  content:""; position:fixed; right:-10%; bottom:-20%; width:65vw; height:55vh; z-index:0; pointer-events:none;
  background: radial-gradient(closest-side, rgba(28,143,209,.30), transparent 70%);
  filter: blur(80px);
  animation: float2 40s ease-in-out infinite alternate;
}
@keyframes float1{ from{ transform: translate3d(-6%, -6%, 0) scale(1);} to{ transform: translate3d(10%, 8%, 0) scale(1.08);} }
@keyframes float2{ from{ transform: translate3d(6%, 4%, 0) scale(1);} to{ transform: translate3d(-10%, -8%, 0) scale(1.12);} }

/* Topbar */
.topbar{
  position:sticky; top:0; z-index:5;
  display:flex; align-items:center; justify-content:space-between;
  padding:14px 24px; border-bottom:1px solid var(--border);
  backdrop-filter:saturate(160%) blur(10px);
  background:linear-gradient(180deg, rgba(16,24,48,.7), rgba(16,24,48,.4));
}
.topbar .brand{font-weight:700; letter-spacing:.3px}
.topbar nav a{
  color:var(--muted); text-decoration:none; margin-left:16px; padding:6px 10px; border-radius:10px;
}
.topbar nav a.active, .topbar nav a:hover{ color:#fff; background:rgba(255,255,255,0.08)}

/* Header clickable logo */
.brand-link{display:flex; align-items:center; gap:10px; text-decoration:none; color:#fff;}
.brand-link:focus-visible{outline:2px solid #5b8cff; outline-offset:4px; border-radius:12px}
.logo-badge-lg{width:44px; height:44px; border-radius:14px; background:var(--grad-primary); display:flex; align-items:center; justify-content:center; font-weight:800; font-size:18px; letter-spacing:.5px; box-shadow:0 6px 18px -4px rgba(91,140,255,.55), 0 0 0 1px rgba(255,255,255,.08); position:relative; overflow:hidden;}
.logo-badge-lg::after{content:""; position:absolute; inset:0; background:radial-gradient(circle at 30% 30%,rgba(255,255,255,.35),transparent 60%); mix-blend-mode:overlay; opacity:.9; animation:logoPulse 5s ease-in-out infinite;}
@keyframes logoPulse{0%,100%{transform:scale(1);}50%{transform:scale(1.06);}}
.logo-text-block{display:flex; flex-direction:column; line-height:1.1}
.logo-text-block .title{font-weight:700; font-size:17px; letter-spacing:.4px}
.logo-text-block .ver{font-size:11px; color:#9fb2ff; margin-top:2px; font-weight:600}
.brand-link:hover .logo-badge-lg{transform:translateY(-2px); box-shadow:0 8px 26px -2px rgba(91,140,255,.65), 0 0 0 1px rgba(255,255,255,.1)}
.brand-link:hover .logo-text-block .title{color:#fff}
@media (prefers-reduced-motion:reduce){ .logo-badge-lg::after{animation:none} }

/* Shared shell for header/footer alignment */
.app-shell{max-width:1400px; width:100%; margin:0 auto; padding:0 22px; display:flex; align-items:center;}
.topbar > .app-shell{justify-content:space-between; min-height:64px;}

/* Links */
a{ color:var(--link) }
a:hover{ color:var(--link-hover) }
.table a{ text-decoration:none; border-bottom:1px dashed rgba(255,255,255,.25) }
.table a:hover{ border-bottom-color:transparent }

tr.age-fresh{background:rgba(46,204,113,0.12);}
tr.age-fresh:hover{background:rgba(46,204,113,0.18);}
tr.age-recent{background:rgba(255,179,71,0.12);}
tr.age-recent:hover{background:rgba(255,179,71,0.18);}
tr.age-old{background:rgba(255,255,255,0.02);}
tr.age-old:hover{background:rgba(255,255,255,0.05);}

/* Layout */
.container{ max-width:1400px; width:100%; margin:24px auto; padding:0 22px}
.cards{ display:grid; grid-template-columns:repeat(4,1fr); gap:16px; margin-bottom:16px}
@media (max-width:1024px){ .cards{grid-template-columns:repeat(2,1fr)} }
@media (max-width:640px){ .cards{grid-template-columns:1fr} }

.card{
  background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02)), var(--card);
  border:1px solid var(--border);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:16px;
}
.glass{
  background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03)), var(--glass);
  backdrop-filter:saturate(140%) blur(10px);
}
.card-title{ font-weight:600; margin-bottom:8px; color:#fff; opacity:.95 }
.metric{ font-size:28px; font-weight:700 }

.actions{ display:flex; align-items:center; gap:16px; margin-bottom:20px}
.hint{ color:var(--muted); font-size:13px}

/* Grid split */
.grid{ display:grid; gap:16px; grid-template-columns:2fr 3fr}
@media (max-width:1100px){ .grid{grid-template-columns:1fr} }

.row{ display:flex; gap:10px }
.stack{ display:flex; flex-direction:column; gap:10px }
.grid-2{ display:grid; grid-template-columns:1fr 1fr; gap:10px }
@media (max-width:700px){ .grid-2{ grid-template-columns:1fr } }

input:not(.switch), select, textarea{
  width:100%; padding:14px 16px; color:#fff; background:rgba(8,12,26,0.78);
  border:1px solid rgba(255,255,255,0.06); border-radius:14px; outline:none;
  font-size:15px; transition: box-shadow .18s ease, border-color .18s ease, transform .06s ease;
  backdrop-filter: blur(6px);
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.02);
}
input::placeholder, textarea::placeholder{ color: rgba(230,240,255,0.45) }
input:focus, textarea:focus, select:focus{
  border-color: transparent; box-shadow: 0 10px 36px rgba(91,140,255,0.12); transform: translateY(-1px);
}

label{ display:flex; flex-direction:column; gap:6px; font-size:14px; color:#cfdbff }

.checkbox{ display:flex; align-items:center; gap:12px; font-size:14px; color:#cfdbff }

/* Switch (pretty checkbox) */
.checkbox input[type=checkbox]{
  appearance:none; -webkit-appearance:none; outline:none;
  width:44px; height:26px; border-radius:999px;
  background:#0f1733; border:1px solid var(--border);
  position:relative; cursor:pointer; transition:.2s ease;
  flex:0 0 44px;
}
.checkbox input[type=checkbox]::after{
  content:""; position:absolute; top:3px; left:3px;
  width:18px; height:18px; border-radius:50%;
  background:#dbe6ff; box-shadow:0 1px 2px rgba(0,0,0,.35), inset 0 -1px 0 rgba(0,0,0,.2);
  transition:transform .2s ease, background .2s ease;
}
.checkbox input[type=checkbox]:hover{ box-shadow:0 0 0 3px rgba(91,140,255,.15) }
.checkbox input[type=checkbox]:checked{
  background:var(--grad-primary);
  border-color:transparent;
}
.checkbox input[type=checkbox]:checked::after{ transform:translateX(18px); background:#fff }
.checkbox small{ color:var(--muted) }

.btn{
  display:inline-flex; align-items:center; justify-content:center; gap:8px;
  padding:12px 16px; border-radius:12px; border:1px solid var(--border);
  color:#031528; background:var(--grad-primary); cursor:pointer; font-weight:700; box-shadow:0 10px 30px rgba(91,140,255,0.10);
}
.btn:hover{ transform: translateY(-1px) }
.btn.primary{ border-color:transparent }
.btn.small{ padding:6px 10px; border-radius:10px; font-size:13px }
.btn-ghost{ background:transparent; color:var(--text); border:1px solid var(--border); box-shadow:none }
.update-btn{ background:var(--grad-primary-x); color:#022; font-weight:800; margin-left:6px; box-shadow:0 8px 30px rgba(91,140,255,0.12); padding:10px 14px; border-radius:12px; border:0; transition: transform .18s ease, box-shadow .18s ease, background-position .6s ease; background-size:200% 100%; display:inline-flex; align-items:center; gap:8px }
.update-btn:hover{ transform:translateY(-3px); box-shadow:0 18px 48px rgba(91,140,255,0.18); background-position:100% 0 }
.update-btn.pulse{ animation:pulse 2.8s infinite; }
@keyframes pulse{ 0%{ box-shadow:0 8px 30px rgba(91,140,255,0.10); transform:translateY(0)} 50%{ box-shadow:0 20px 48px rgba(91,140,255,0.18); transform:translateY(-3px)} 100%{ box-shadow:0 8px 30px rgba(91,140,255,0.10); transform:translateY(0)} }

.alert{ padding:10px 12px; border-radius:10px; margin:10px 0; background:#16233f; border:1px solid var(--border) }
.alert.success{ border-color:#1f7a49; color:#b8ffd7 }
.alert.danger{ border-color:#8b2b2b; color:#ffc9c9 }

.table-wrap{ width:100%; overflow-x:auto; overflow-y:auto; border:1px solid var(--border); border-radius:12px; max-height:65vh }
.table{ width:100%; border-collapse:separate; border-spacing:0 }
.table th, .table td{ white-space:nowrap; text-align:left; padding:8px 10px; border-bottom:1px solid var(--border); vertical-align:top }
.table th{ position:sticky; top:0; backdrop-filter:blur(6px); background:#131d3aee; font-weight:600; border-top:1px solid transparent }
.ellipsis{ max-width:480px; overflow:hidden; text-overflow:ellipsis }

/* Auth pages: keep page a column but center the auth card; do not reset display to avoid breaking site layout */
body.auth{ align-items:center; justify-content:center; min-height:100vh }
.auth-card{ width:440px; max-width:94vw; padding:26px; border-radius:var(--radius); border:1px solid var(--border) }
.muted{ color:var(--muted); font-size:13px }

/* Forms specifics */
.add-form input[type=url]{ flex:1 }
.settings-form code{ background:#0f1733; padding:2px 6px; border-radius:6px }

/* Small UI helpers */
.pill{ display:inline-block; padding:2px 8px; border-radius:999px; background:#0f1733; border:1px solid var(--border); font-weight:600; font-size:12px }
.muted-inline{ color:var(--muted); font-size:12px }

/* Domains view tweaks */
.domains .left{ min-width:280px }
.domains .table td .ellipsis{ max-width:520px }
.domains .table th, .domains .table td{ padding:6px 8px }
.domains .col-status{ width:70px }
.domains .col-actions{ width:100px }
.domains .table .btn.small{ white-space:nowrap }
#top-domains{ margin-top:12px; margin-bottom: 12px; }
.grid.domains{ grid-template-columns: minmax(360px, 420px) 1fr; align-items:start }

/* Fixed layout for links table so nothing overflows */
.table-links{ table-layout:fixed }
.cut{ display:block; overflow:hidden; text-overflow:ellipsis; white-space:nowrap }
.table-links .col-views{ width:68px; text-align:right }
.table-links td.col-views{ text-align:right }

/* Responsive column hiding to keep the table within the viewport */
.hide-md{ display:table-cell }
.hide-sm{ display:table-cell }
@media (max-width:1500px){
  .hide-md{ display:none }
}
@media (max-width:820px){
  .hide-sm{ display:none }
}

@media (max-width:1100px){
  .table-wrap{ max-height:none }
}

/* Compact dates cell to avoid overflow and allow 2-line layout */
.dates{ font-size:12px; color:var(--muted); line-height:1.15; white-space:normal }

/* Accordion (details) used for Sources block on the dashboard */
.accordion summary{ list-style:none; cursor:pointer; padding:0 }
.accordion summary::-webkit-details-marker{ display:none }
.accordion > .content{ margin-top:12px }

/* Full-width helper for dashboard lists section */
#lists .card{ width:100% }

/* --- Top domains chips --- */
#top-domains .chips{ display:flex; gap:10px; flex-wrap:wrap }
.chip{
  display:inline-flex; align-items:center; gap:8px;
  padding:8px 10px; border-radius:999px; background:#0f1733;
  border:1px solid var(--border); text-decoration:none; color:#fff;
}
.chip:hover{ background:#16233f }
.chip-host{ max-width:180px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap }
.chip-count{ font-weight:700; background:#13214a; padding:2px 8px; border-radius:999px; border:1px solid var(--border) }
.btn-link{ color:var(--link); text-decoration:none; border-bottom:1px dashed rgba(255,255,255,.25) }
.btn-link:hover{ color:var(--link-hover); border-bottom-color:transparent }

/* Tighter rows for links table to keep within viewport */
.table-links th, .table-links td{ padding:6px 8px }

/* More explicit accordion indicator */
.accordion summary{ position:relative; padding-left:18px }
.accordion summary::after{
  content:'▸'; position:absolute; left:0; top:0; line-height:1.2; opacity:.8;
}
.accordion[open] summary::after{ content:'▾' }

/* Raise content above animated background */
.topbar, main.container { position: relative; z-index: 1; }

/* Make main content grow so footer stays at bottom on short pages */
main.container{ flex:1 0 auto; padding-bottom:14px; }

/* Footer (compact, no horizontal overflow) */
#app-footer{position:relative;width:100%;margin-top:16px;padding:12px 0;border-top:1px solid rgba(255,255,255,0.14);backdrop-filter:blur(8px) saturate(130%);background:linear-gradient(180deg,rgba(10,14,28,.38),rgba(8,12,24,.18));overflow:hidden;flex-shrink:0}
#app-footer::before{content:"";position:absolute;left:0;right:0;bottom:-40px;height:160px;pointer-events:none;background:radial-gradient(60% 60% at 50% 120%,rgba(91,140,255,.14),transparent 60%);filter:blur(26px)}
#app-footer .footer-inner{max-width:1400px;margin:0 auto;padding:12px 22px;display:grid;grid-template-columns:auto 1fr auto;align-items:center;gap:32px;width:100%}
@media (max-width:1000px){#app-footer .footer-inner{grid-template-columns:1fr;gap:20px;text-align:center}.footer-links-right{justify-content:center}}
.footer-service{display:flex;align-items:center;gap:12px}
.logo-stack{flex-direction:column;align-items:flex-start;gap:8px;display:flex}
@media (max-width:1000px){.logo-stack{align-items:center}}
.footer-company{font-size:13px;line-height:1.3;color:var(--muted)}
.footer-company strong{color:#dff;font-weight:700}
.footer-links-right{display:flex;flex-wrap:wrap;gap:10px;justify-content:flex-end}
.footer-links-right a,.update-pill{display:inline-flex;align-items:center;gap:6px;padding:8px 12px;border-radius:10px;background:rgba(255,255,255,0.05);border:1px solid var(--border);font-size:13px;text-decoration:none;color:#eaf0ff}
.footer-links-right a:hover,.update-pill:hover{background:rgba(255,255,255,.09)}
.update-pill{background:var(--grad-coral);color:#3a1f16;font-weight:700;border:0;box-shadow:0 10px 30px rgba(255,107,107,.35);cursor:pointer}
.update-pill:hover{transform:translateY(-2px);box-shadow:0 16px 42px rgba(255,107,107,.45)}
.footer-bottom{grid-column:1/-1;display:flex;align-items:center;justify-content:space-between;gap:10px;border-top:1px solid rgba(255,255,255,.08);padding-top:8px;font-size:12px;color:var(--muted)}
@media (max-width:600px){.footer-bottom{flex-direction:column;gap:4px}}
.footer-right{display:none}
/* Stack tweaks after logo swap */
.footer-service .service-name{display:flex;align-items:center;gap:6px}

/* Footer icon buttons: ensure consistent icon size and visibility */
.footer-links-right .icon-btn{display:inline-flex;align-items:center;gap:8px;line-height:1;font-weight:500}
.footer-links-right .icon-btn .i{width:16px;height:16px;flex:0 0 16px;display:block;stroke:currentColor;fill:none;stroke-width:2}
.footer-links-right .icon-btn svg{width:100%;height:100%;stroke:currentColor;fill:none;stroke-width:2;stroke-linecap:round;stroke-linejoin:round}
/* Fallback if SVG missing */
.footer-links-right .icon-btn:not(:has(svg))::before{content:"•";display:inline-block;width:6px;height:6px;border-radius:50%;background:currentColor;opacity:.7;margin-right:4px}
/* End footer icon normalization */

/* Utility */
.sr-only{position:absolute!important;width:1px!important;height:1px!important;padding:0!important;margin:-1px!important;overflow:hidden!important;clip:rect(0 0 0 0)!important;white-space:nowrap!important;border:0!important}

/* Brand animated text (single source) */
#brand-type{min-height:1.4em;font-weight:700;font-size:22px;background:linear-gradient(90deg,#ffd1c4,#ff8d72,#ffd1c4);-webkit-background-clip:text;background-clip:text;color:transparent;letter-spacing:.04em;text-shadow:0 0 10px rgba(255,140,120,.28);position:relative}
#brand-type::after{content:"|";margin-left:2px;opacity:.75;animation:blink 1.1s steps(1) infinite}
@keyframes blink{50%{opacity:0}}
@media (prefers-reduced-motion:reduce){#brand-type::after{animation:none;opacity:.55}}

/* Version badge */
.ver-badge{display:inline-flex;align-items:center;padding:4px 8px;font-size:11px;font-weight:600;border-radius:8px;background:var(--grad-coral);color:#1a0f13;box-shadow:0 4px 14px -2px rgba(255,107,107,.45)}

/* Header logo sizing */
.logo-icon{display:block;height:40px;width:auto}
.logo-icon--header.xl{height:70px;max-height:70px}
@media (max-width:700px){.logo-icon--header.xl{height:44px}}

/* Footer small logo */
.logo-icon--footer{height:50px;width:auto}
@media (max-width:700px){.logo-icon--footer{height:30px}}

/* Reset list markers inside settings to avoid random dot before switches */
.settings-form *::marker{ content:"" }
.settings-form ul, .settings-form ol{ list-style:none; margin:0; padding:0 }
.settings-form hr{ border:0; border-top:1px solid var(--border); margin:12px 0; }

.logo-pill{ width:56px; height:56px; border-radius:12px; background:var(--grad-primary); display:flex; align-items:center; justify-content:center; color:#fff; font-weight:800; font-size:18px; box-shadow:0 8px 24px rgba(91,140,255,0.12) }

/* === SCOPES (final) === */
.scope-row{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:16px;width:100%;margin:8px 0 18px}
@media (max-width:1000px){.scope-row{grid-template-columns:repeat(2,minmax(0,1fr))}}
@media (max-width:700px){.scope-row{grid-template-columns:1fr}}
.switch-card{display:flex;flex-direction:column;align-items:flex-start;gap:10px;padding:14px 16px;border:1px solid rgba(255,255,255,.12);border-radius:14px;background:#0f1733;box-shadow:var(--shadow);min-width:0;position:relative}
.switch-card:hover{border-color:rgba(255,255,255,.2)}
.switch-card .switch-title{font-weight:600;font-size:14px;color:#fff;width:100%}
.switch-card .switch-sub{font-size:12px;color:var(--muted);display:flex;align-items:center;gap:8px;width:100%}
/* Toggle */
input.switch[type=checkbox]{appearance:none;-webkit-appearance:none;margin:0;padding:0;width:40px;height:22px;border-radius:999px;background:#0f1733;border:1px solid var(--border);position:relative;cursor:pointer;transition:background .2s ease,border-color .2s ease,box-shadow .2s ease;display:inline-block;vertical-align:middle}
input.switch[type=checkbox]::after{content:"";position:absolute;top:3px;left:3px;width:16px;height:16px;border-radius:50%;background:#dbe6ff;box-shadow:0 1px 2px rgba(0,0,0,.35),inset 0 -1px 0 rgba(0,0,0,.25);transition:transform .22s cubic-bezier(.4,.2,.2,1),background .2s ease}
input.switch[type=checkbox]:hover{box-shadow:0 0 0 3px rgba(91,140,255,.18)}
input.switch[type=checkbox]:checked{background:var(--grad-primary);border-color:transparent}
input.switch[type=checkbox]:checked::after{transform:translateX(18px);background:#fff}
input.switch[type=checkbox]:focus-visible{outline:2px solid var(--pri);outline-offset:2px}
input.switch[type=checkbox]:disabled{opacity:.5;cursor:not-allowed}
.scope-row > .switch-card{width:100%;height:100%}
/* === END SCOPES === */
